<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QSBD: qsbd::gk&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QSBD<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">QSBD</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>qsbd</b></li><li class="navelem"><a class="el" href="classqsbd_1_1gk.html">gk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classqsbd_1_1gk-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">qsbd::gk&lt; T &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A class to represent the Greenwald-Khanna sketch.  
 <a href="classqsbd_1_1gk.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for qsbd::gk&lt; T &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classqsbd_1_1gk.png" usemap="#qsbd::gk_3C_20T_20_3E_map" alt=""/>
  <map id="qsbd::gk_3C_20T_20_3E_map" name="qsbd::gk_3C_20T_20_3E_map">
<area href="classqsbd_1_1quantile__sketch.html" alt="qsbd::quantile_sketch&lt; T &gt;" shape="rect" coords="0,0,161,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae21cda26d56a9d00f5b435e3a8bb4933"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1gk.html#ae21cda26d56a9d00f5b435e3a8bb4933">gk</a> (double eps)</td></tr>
<tr class="memdesc:ae21cda26d56a9d00f5b435e3a8bb4933"><td class="mdescLeft">&#160;</td><td class="mdescRight">A constructor for the GK summary.  <a href="classqsbd_1_1gk.html#ae21cda26d56a9d00f5b435e3a8bb4933">More...</a><br /></td></tr>
<tr class="separator:ae21cda26d56a9d00f5b435e3a8bb4933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06c25312da044d3bd88d72811466a879"><td class="memItemLeft" align="right" valign="top"><a id="a06c25312da044d3bd88d72811466a879"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1gk.html#a06c25312da044d3bd88d72811466a879">~gk</a> ()</td></tr>
<tr class="memdesc:a06c25312da044d3bd88d72811466a879"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor for the GK summary. <br /></td></tr>
<tr class="separator:a06c25312da044d3bd88d72811466a879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a1041a9881bf5362a0fb1578022b3e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1gk.html#a3a1041a9881bf5362a0fb1578022b3e3">update</a> (T value) override</td></tr>
<tr class="memdesc:a3a1041a9881bf5362a0fb1578022b3e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">A method to update the summary.  <a href="classqsbd_1_1gk.html#a3a1041a9881bf5362a0fb1578022b3e3">More...</a><br /></td></tr>
<tr class="separator:a3a1041a9881bf5362a0fb1578022b3e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3223001631ceb911111401bdc7eb3ede"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classqsbd_1_1quantile__sketch.html">quantile_sketch</a>&lt; T &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1gk.html#a3223001631ceb911111401bdc7eb3ede">merge</a> (<a class="el" href="classqsbd_1_1quantile__sketch.html">quantile_sketch</a>&lt; T &gt; &amp;rhs) override</td></tr>
<tr class="memdesc:a3223001631ceb911111401bdc7eb3ede"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges this instance of gk with another gk instance.  <a href="classqsbd_1_1gk.html#a3223001631ceb911111401bdc7eb3ede">More...</a><br /></td></tr>
<tr class="separator:a3223001631ceb911111401bdc7eb3ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039ced5336b543060bf3ee4a5a4999fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1gk.html#a039ced5336b543060bf3ee4a5a4999fc">inner_merge</a> (<a class="el" href="classqsbd_1_1quantile__sketch.html">quantile_sketch</a>&lt; T &gt; &amp;rhs) override</td></tr>
<tr class="memdesc:a039ced5336b543060bf3ee4a5a4999fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges this instance of gk with another gk instance and saves it in this instance.  <a href="classqsbd_1_1gk.html#a039ced5336b543060bf3ee4a5a4999fc">More...</a><br /></td></tr>
<tr class="separator:a039ced5336b543060bf3ee4a5a4999fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34fd256cb9b567896c2dde66ce43f036"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1gk.html#a34fd256cb9b567896c2dde66ce43f036">query</a> (T value) override</td></tr>
<tr class="memdesc:a34fd256cb9b567896c2dde66ce43f036"><td class="mdescLeft">&#160;</td><td class="mdescRight">A method that returns the rank for some element <code>value</code>.  <a href="classqsbd_1_1gk.html#a34fd256cb9b567896c2dde66ce43f036">More...</a><br /></td></tr>
<tr class="separator:a34fd256cb9b567896c2dde66ce43f036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02306ce2e0b7c41c5ef3021f0e3196e0"><td class="memItemLeft" align="right" valign="top"><a id="a02306ce2e0b7c41c5ef3021f0e3196e0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1gk.html#a02306ce2e0b7c41c5ef3021f0e3196e0">print</a> ()</td></tr>
<tr class="memdesc:a02306ce2e0b7c41c5ef3021f0e3196e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">A debug method to print the tuple list in the summary on the standard ouput. <br /></td></tr>
<tr class="separator:a02306ce2e0b7c41c5ef3021f0e3196e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83684f1daa6d193af84dbebe04529c14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1gk.html#a83684f1daa6d193af84dbebe04529c14">get_N</a> ()</td></tr>
<tr class="memdesc:a83684f1daa6d193af84dbebe04529c14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter method to pick the total of elements inserted.  <a href="classqsbd_1_1gk.html#a83684f1daa6d193af84dbebe04529c14">More...</a><br /></td></tr>
<tr class="separator:a83684f1daa6d193af84dbebe04529c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ae807440b4ed82487bf89f7c91042f8"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1gk.html#a1ae807440b4ed82487bf89f7c91042f8">get_heap_size</a> () override</td></tr>
<tr class="memdesc:a1ae807440b4ed82487bf89f7c91042f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the estimated amount of heap memory allocated for this object for a pointer.  <a href="classqsbd_1_1gk.html#a1ae807440b4ed82487bf89f7c91042f8">More...</a><br /></td></tr>
<tr class="separator:a1ae807440b4ed82487bf89f7c91042f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classqsbd_1_1quantile__sketch"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classqsbd_1_1quantile__sketch')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classqsbd_1_1quantile__sketch.html">qsbd::quantile_sketch&lt; T &gt;</a></td></tr>
<tr class="memitem:acdc52dcaf3fa236574629e208432aa26 inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="memItemLeft" align="right" valign="top"><a id="acdc52dcaf3fa236574629e208432aa26"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1quantile__sketch.html#acdc52dcaf3fa236574629e208432aa26">~quantile_sketch</a> ()</td></tr>
<tr class="memdesc:acdc52dcaf3fa236574629e208432aa26 inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="mdescLeft">&#160;</td><td class="mdescRight">A virtual destructor for all kinds of quantile_sketch. <br /></td></tr>
<tr class="separator:acdc52dcaf3fa236574629e208432aa26 inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e1fbfa40af7286315b193affc8999b5 inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="memItemLeft" align="right" valign="top"><a id="a0e1fbfa40af7286315b193affc8999b5"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1quantile__sketch.html#a0e1fbfa40af7286315b193affc8999b5">init</a> ()</td></tr>
<tr class="memdesc:a0e1fbfa40af7286315b193affc8999b5 inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="mdescLeft">&#160;</td><td class="mdescRight">A virtual init method this should be used unless the constructor was already called. <br /></td></tr>
<tr class="separator:a0e1fbfa40af7286315b193affc8999b5 inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab21feebdceb1dc906fb422680b721fcb inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1quantile__sketch.html#ab21feebdceb1dc906fb422680b721fcb">update</a> (T elem, int weight)</td></tr>
<tr class="memdesc:ab21feebdceb1dc906fb422680b721fcb inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="mdescLeft">&#160;</td><td class="mdescRight">A virtual update method. Receives a <code>elem</code> and a <code>weight</code> and updates the sketch with it.  <a href="classqsbd_1_1quantile__sketch.html#ab21feebdceb1dc906fb422680b721fcb">More...</a><br /></td></tr>
<tr class="separator:ab21feebdceb1dc906fb422680b721fcb inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b54b5419ec258c6b94cbacb5db81cbc inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="memItemLeft" align="right" valign="top">virtual T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqsbd_1_1quantile__sketch.html#a6b54b5419ec258c6b94cbacb5db81cbc">quantile</a> (double quant)</td></tr>
<tr class="memdesc:a6b54b5419ec258c6b94cbacb5db81cbc inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="mdescLeft">&#160;</td><td class="mdescRight">A virtual quantile method. Receives a <code>quant</code> and returns a element associate with this quantile.  <a href="classqsbd_1_1quantile__sketch.html#a6b54b5419ec258c6b94cbacb5db81cbc">More...</a><br /></td></tr>
<tr class="separator:a6b54b5419ec258c6b94cbacb5db81cbc inherit pub_methods_classqsbd_1_1quantile__sketch"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class T&gt;<br />
class qsbd::gk&lt; T &gt;</div><p >A class to represent the Greenwald-Khanna sketch. </p>
<p >The GK summary provides a compact summary of data drawn from an ordered input domain U. It's a comparison-based algorithm, it works on any ordered domain U where comparison operator is defined. But it only accepts insertions of unweighted elements. So here the total number of elements inserted into the summary, N, is the same as the total weight W. This summary can be merged but its size grows after each MERGE.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>The object type for the gk </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="gk_8hpp_source.html#l00030">30</a> of file <a class="el" href="gk_8hpp_source.html">gk.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae21cda26d56a9d00f5b435e3a8bb4933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae21cda26d56a9d00f5b435e3a8bb4933">&#9670;&nbsp;</a></span>gk()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classqsbd_1_1gk.html">qsbd::gk</a>&lt; T &gt;::<a class="el" href="classqsbd_1_1gk.html">gk</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>eps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A constructor for the GK summary. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eps</td><td>The error used in the sketch</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The object type T should define std::numeric_limits&lt;T&gt;::max() </dd></dl>

<p class="definition">Definition at line <a class="el" href="gk_8hpp_source.html#l00059">59</a> of file <a class="el" href="gk_8hpp_source.html">gk.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                      {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            N = 0;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            epsilon = eps;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <a class="code" href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">insert_sorted</a>(tuple_list, std::make_pair(std::numeric_limits&lt;T&gt;::max(), std::make_pair(1, 0)));</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        }</div>
<div class="ttc" id="autils_8h_html_abd01b471b80c0ef69eb752347fdc662a"><div class="ttname"><a href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">qsbd::insert_sorted</a></div><div class="ttdeci">void insert_sorted(std::vector&lt; T &gt; &amp;vec, const T &amp;data)</div><div class="ttdoc">This function inserts a element data into a vector vec and keeps it sorted.</div><div class="ttdef"><b>Definition:</b> <a href="utils_8h_source.html#l00176">utils.h:176</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1ae807440b4ed82487bf89f7c91042f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ae807440b4ed82487bf89f7c91042f8">&#9670;&nbsp;</a></span>get_heap_size()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classqsbd_1_1gk.html">qsbd::gk</a>&lt; T &gt;::get_heap_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Getter for the estimated amount of heap memory allocated for this object for a pointer. </p>
<dl class="section return"><dt>Returns</dt><dd>The estimated memory in bytes. </dd></dl>

<p>Implements <a class="el" href="classqsbd_1_1quantile__sketch.html#ae814c5158cd183267ed7029d97355267">qsbd::quantile_sketch&lt; T &gt;</a>.</p>

<p class="definition">Definition at line <a class="el" href="gk_8hpp_source.html#l00291">291</a> of file <a class="el" href="gk_8hpp_source.html">gk.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                          {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            uint64_t gk_hs = <span class="keyword">sizeof</span>(<a class="code" href="classgk.html">gk&lt;T&gt;</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            uint64_t tl_hs = <span class="keyword">sizeof</span>(std::pair&lt;T, std::pair&lt;int, int&gt;&gt;) * tuple_list.capacity();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordflow">return</span> gk_hs + tl_hs;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div>
<div class="ttc" id="aclassgk_html"><div class="ttname"><a href="classgk.html">gk</a></div><div class="ttdef"><b>Definition:</b> <a href="gk_8cpp_source.html#l00006">gk.cpp:6</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a83684f1daa6d193af84dbebe04529c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83684f1daa6d193af84dbebe04529c14">&#9670;&nbsp;</a></span>get_N()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classqsbd_1_1gk.html">qsbd::gk</a>&lt; T &gt;::get_N </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Getter method to pick the total of elements inserted. </p>
<dl class="section return"><dt>Returns</dt><dd>The total of elements inserted. </dd></dl>

<p class="definition">Definition at line <a class="el" href="gk_8hpp_source.html#l00283">283</a> of file <a class="el" href="gk_8hpp_source.html">gk.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                   {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">return</span> N;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a039ced5336b543060bf3ee4a5a4999fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a039ced5336b543060bf3ee4a5a4999fc">&#9670;&nbsp;</a></span>inner_merge()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classqsbd_1_1gk.html">qsbd::gk</a>&lt; T &gt;::inner_merge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classqsbd_1_1quantile__sketch.html">quantile_sketch</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Merges this instance of gk with another gk instance and saves it in this instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rhs</td><td>A gk&lt;T&gt; instance to be merged </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classqsbd_1_1gk.html" title="A class to represent the Greenwald-Khanna sketch.">gk</a>&lt;T&gt;::<a class="el" href="classqsbd_1_1gk.html#a3223001631ceb911111401bdc7eb3ede" title="Merges this instance of gk with another gk instance.">merge</a>(<a class="el" href="classqsbd_1_1quantile__sketch.html" title="A interface for quantile sketchs.">quantile_sketch</a>&lt;T&gt;&amp;) </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The error in both instances needs to be the same. The error will be considered as the same if <img class="formulaInl" alt="$|this-&gt;error - rhs.error| \leq 1e-6$" src="form_8.png"/></dd>
<dd>
The <a class="el" href="classqsbd_1_1quantile__sketch.html" title="A interface for quantile sketchs.">quantile_sketch</a> must be a instance of the gk class </dd></dl>

<p>Implements <a class="el" href="classqsbd_1_1quantile__sketch.html#af3458d26f52106a68ab2a65a81eeb0af">qsbd::quantile_sketch&lt; T &gt;</a>.</p>

<p class="definition">Definition at line <a class="el" href="gk_8hpp_source.html#l00191">191</a> of file <a class="el" href="gk_8hpp_source.html">gk.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                                           {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <a class="code" href="classgk.html">gk&lt;T&gt;</a>&amp; rhs_cv = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classgk.html">gk&lt;T&gt;</a>&amp;<span class="keyword">&gt;</span>(rhs); </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <a class="code" href="qsbd__debug_8h.html#a0966b817b229d48e5ffc7feab19a0be6">ASSERT</a>(rhs_cv.epsilon - this-&gt;epsilon &lt; 1e-6);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordtype">int</span> left_index = 0;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordtype">int</span> right_index = 0; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordtype">int</span> merged_N = 0; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            std::vector&lt;std::pair&lt;T, std::pair&lt;int, int&gt;&gt;&gt; merged_tuple;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">while</span>(left_index &lt; tuple_list.size() and right_index &lt; rhs_cv.tuple_list.size()){</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                merged_N += 1;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <span class="keywordflow">if</span>(tuple_list[left_index].first &lt; rhs_cv.tuple_list[right_index].first){</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    T value = tuple_list[left_index].first;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    <span class="keywordtype">int</span> weight = tuple_list[left_index].second.first;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    <span class="keywordtype">int</span> uncertainty = tuple_list[left_index].second.second + rhs_cv.tuple_list[right_index].second.first + rhs_cv.tuple_list[right_index].second.second - 1; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                    </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                    <a class="code" href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">insert_sorted</a>(merged_tuple, {value, {weight, uncertainty}});</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                    left_index++;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    T value = rhs_cv.tuple_list[right_index].first;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    <span class="keywordtype">int</span> weight = rhs_cv.tuple_list[right_index].second.first;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                    <span class="keywordtype">int</span> uncertainty = rhs_cv.tuple_list[right_index].second.second + rhs_cv.tuple_list[right_index].second.first + tuple_list[left_index].second.second - 1; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                    <a class="code" href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">insert_sorted</a>(merged_tuple, {value, {weight, uncertainty}});</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    right_index++;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">while</span>(left_index &lt; tuple_list.size()){</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                merged_N += 1;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <a class="code" href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">insert_sorted</a>(merged_tuple, tuple_list[left_index]);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                left_index++;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordflow">while</span>(right_index &lt; rhs_cv.tuple_list.size()){</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                merged_N += 1;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <a class="code" href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">insert_sorted</a>(merged_tuple, rhs_cv.tuple_list[right_index]);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                right_index++;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordtype">int</span> capacity = (int) ceil(2.0 * epsilon * merged_N);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0, j = 1; j &lt; merged_tuple.size(); i++, j++){</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordflow">if</span> ((merged_tuple[i].second.first + merged_tuple[j].second.first + merged_tuple[j].second.second) &lt; capacity){</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    merged_tuple[j].second.first += merged_tuple[i].second.first;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    merged_tuple.erase(merged_tuple.begin() + i);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="comment">//this-&gt;tuple_list.clear();</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            this-&gt;tuple_list = std::move(merged_tuple);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            this-&gt;N = merged_N;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        }</div>
<div class="ttc" id="aqsbd__debug_8h_html_a0966b817b229d48e5ffc7feab19a0be6"><div class="ttname"><a href="qsbd__debug_8h.html#a0966b817b229d48e5ffc7feab19a0be6">ASSERT</a></div><div class="ttdeci">#define ASSERT(cond)</div><div class="ttdoc">If the condition cond is false this debug macro will output in the error console (std::cerr) the cond...</div><div class="ttdef"><b>Definition:</b> <a href="qsbd__debug_8h_source.html#l00051">qsbd_debug.h:51</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3223001631ceb911111401bdc7eb3ede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3223001631ceb911111401bdc7eb3ede">&#9670;&nbsp;</a></span>merge()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classqsbd_1_1quantile__sketch.html">quantile_sketch</a>&lt;T&gt;* <a class="el" href="classqsbd_1_1gk.html">qsbd::gk</a>&lt; T &gt;::merge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classqsbd_1_1quantile__sketch.html">quantile_sketch</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Merges this instance of gk with another gk instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rhs</td><td>A gk&lt;T&gt; instance to be merged </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the new instance of a gk </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classqsbd_1_1gk.html" title="A class to represent the Greenwald-Khanna sketch.">gk</a>&lt;T&gt;::inner_merge(<a class="el" href="classqsbd_1_1quantile__sketch.html" title="A interface for quantile sketchs.">quantile_sketch</a>&lt;T&gt;&amp;) </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The error in both instance needs to be the same. The error will be considered as the same if <img class="formulaInl" alt="$|this-&gt;error - rhs.error| \leq 1e-6$" src="form_8.png"/></dd>
<dd>
The <a class="el" href="classqsbd_1_1quantile__sketch.html" title="A interface for quantile sketchs.">quantile_sketch</a> must be a instance of the gk class</dd>
<dd>
Is the user responsabilite of frees the returned pointer </dd></dl>

<p>Implements <a class="el" href="classqsbd_1_1quantile__sketch.html#a20950642c0bd2279335f566b1c0170df">qsbd::quantile_sketch&lt; T &gt;</a>.</p>

<p class="definition">Definition at line <a class="el" href="gk_8hpp_source.html#l00121">121</a> of file <a class="el" href="gk_8hpp_source.html">gk.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                                                                    {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <a class="code" href="classgk.html">gk&lt;T&gt;</a>&amp; rhs_cv = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classgk.html">gk&lt;T&gt;</a>&amp;<span class="keyword">&gt;</span>(rhs); </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <a class="code" href="qsbd__debug_8h.html#a0966b817b229d48e5ffc7feab19a0be6">ASSERT</a>(rhs_cv.epsilon - this-&gt;epsilon &lt; 1e-6);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordtype">int</span> left_index = 0;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordtype">int</span> right_index = 0; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <a class="code" href="classgk.html">gk&lt;T&gt;</a>* merged_summary = <span class="keyword">new</span> <a class="code" href="classgk.html">gk&lt;T&gt;</a>(epsilon);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">while</span>(left_index &lt; tuple_list.size() and right_index &lt; rhs_cv.tuple_list.size()){</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                merged_summary-&gt;N += 1;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                <span class="keywordflow">if</span>(tuple_list[left_index].first &lt; rhs_cv.tuple_list[right_index].first){</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    T value = tuple_list[left_index].first;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                    <span class="keywordtype">int</span> weight = tuple_list[left_index].second.first;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                    <span class="keywordtype">int</span> uncertainty = tuple_list[left_index].second.second + rhs_cv.tuple_list[right_index].second.first + rhs_cv.tuple_list[right_index].second.second - 1; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                    </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                    <a class="code" href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">insert_sorted</a>(merged_summary-&gt;tuple_list, {value, {weight, uncertainty}});</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    left_index++;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                    T value = rhs_cv.tuple_list[right_index].first;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                    <span class="keywordtype">int</span> weight = rhs_cv.tuple_list[right_index].second.first;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                    <span class="keywordtype">int</span> uncertainty = rhs_cv.tuple_list[right_index].second.second + rhs_cv.tuple_list[right_index].second.first + tuple_list[left_index].second.second - 1; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                    <a class="code" href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">insert_sorted</a>(merged_summary-&gt;tuple_list, {value, {weight, uncertainty}});</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    right_index++;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="keywordflow">while</span>(left_index &lt; tuple_list.size()){</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                merged_summary-&gt;N += 1;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                <a class="code" href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">insert_sorted</a>(merged_summary-&gt;tuple_list, tuple_list[left_index]);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                left_index++;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="keywordflow">while</span>(right_index &lt; rhs_cv.tuple_list.size()){</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                merged_summary-&gt;N += 1;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <a class="code" href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">insert_sorted</a>(merged_summary-&gt;tuple_list, rhs_cv.tuple_list[right_index]);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                right_index++;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keywordtype">int</span> capacity = (int) ceil(2.0 * epsilon * merged_summary-&gt;get_N());</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0, j = 1; j &lt; merged_summary-&gt;tuple_list.size(); i++, j++){</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                <span class="keywordflow">if</span> ((merged_summary-&gt;tuple_list[i].second.first + merged_summary-&gt;tuple_list[j].second.first + merged_summary-&gt;tuple_list[j].second.second) &lt; capacity){</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                    merged_summary-&gt;tuple_list[j].second.first += merged_summary-&gt;tuple_list[i].second.first;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    merged_summary-&gt;tuple_list.erase(merged_summary-&gt;tuple_list.begin() + i);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            } </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">return</span> merged_summary;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a34fd256cb9b567896c2dde66ce43f036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34fd256cb9b567896c2dde66ce43f036">&#9670;&nbsp;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classqsbd_1_1gk.html">qsbd::gk</a>&lt; T &gt;::query </td>
          <td>(</td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A method that returns the rank for some element <code>value</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>The element to be queried </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The rank for such element </dd></dl>

<p>Reimplemented from <a class="el" href="classqsbd_1_1quantile__sketch.html#a8cf64d79f25d910d1c1aed209ddac71e">qsbd::quantile_sketch&lt; T &gt;</a>.</p>

<p class="definition">Definition at line <a class="el" href="gk_8hpp_source.html#l00257">257</a> of file <a class="el" href="gk_8hpp_source.html">gk.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                    {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordtype">int</span> weight_sum = 0;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keywordtype">int</span> index = 0;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordflow">while</span>(value &gt;= tuple_list[index].first){</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                weight_sum += tuple_list[index].second.first;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                index++;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keywordflow">return</span> (weight_sum - 1 + ((tuple_list[index].second.first + tuple_list[index].second.second) / 2));</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a1041a9881bf5362a0fb1578022b3e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a1041a9881bf5362a0fb1578022b3e3">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classqsbd_1_1gk.html">qsbd::gk</a>&lt; T &gt;::update </td>
          <td>(</td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A method to update the summary. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>A object of type &lt;T&gt; </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classqsbd_1_1quantile__sketch.html#a0e7eefd81eec272e92b7cb989be33c6a">qsbd::quantile_sketch&lt; T &gt;</a>.</p>

<p class="definition">Definition at line <a class="el" href="gk_8hpp_source.html#l00075">75</a> of file <a class="el" href="gk_8hpp_source.html">gk.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                      {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            N += 1;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="comment">//find smallest i such x[i] &gt; value</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <span class="keywordtype">int</span> index = find_smallest_i(tuple_list, value);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <span class="keywordtype">int</span> weight = tuple_list[index].second.first;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <span class="keywordtype">int</span> uncertainty = tuple_list[index].second.second;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keywordtype">int</span> capacity = (int) ceil(2.0 * epsilon * N);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keywordflow">if</span>((weight + uncertainty + 1) &lt; capacity){</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                tuple_list[index].second.first += 1;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                <span class="comment">// see if this inserts in the i position</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                <a class="code" href="utils_8h.html#abd01b471b80c0ef69eb752347fdc662a">insert_sorted</a>(tuple_list, {value, {1, weight + uncertainty - 1}});</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0, j = 1; j &lt; tuple_list.size(); i++, j++){</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                    <span class="keywordflow">if</span> ((tuple_list[i].second.first + tuple_list[j].second.first + tuple_list[j].second.second) &lt; capacity){</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                        tuple_list[j].second.first += tuple_list[i].second.first;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                        tuple_list.erase(tuple_list.begin() + i);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                } </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/gk/<a class="el" href="gk_8hpp_source.html">gk.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
